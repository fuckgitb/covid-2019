# 开发环境说明

# Nginx&Gnicorn&Flask的关系

Nginx是web服务器，监听来自外部的端口（如80端口）请求，Gunicorn运行Flask应用。

Nginx将客户端的http请求转发给Gunicorn, Gunicorn再转发给Flask应用处理。

处理得到结果后再返回给Nginx,Nginx再返回给客户端。

# 安装Nginx

```
root@iZwz94kwqu5mk9oxpv2m2tZ:~# sudo apt install nginx
```

这里使用Ubuntu的 `apt` 命令的方式进行安装Nginx。安装完成后，按照Linux系统的目录结构设计:

（1）Nginx相关文件会放置在目录：`/etc/nginx`

（2）Nginx默认配置文件路径：`/etc/nginx/nginx.conf`

（2）Nginx二进制文件（命令）文件路径：`/etc/usr/sbin/nginx`

# 创建项目的Nginx配置文件

当我们启动Nginx的时候，和Gunicorn并没有关联上，我们应该写一段代码让Nginx和Gunicorn关联上。那么这段代码写在哪里？

当Nginx启动的时候，会加载Nginx默认的配置文件`/etc/nginx/nginx.conf`，所以我们可以把让Nginx和Gunicorn关联的代码写在这个文件里，这样Nginx运行的时候就和Gunicorn关联上了。但是，一般来说，项目可能有多个，如果每个项目的配置都写到这个文件里，那么就会显得很乱，不方便管理。为了方便管理，一般为每个项目创建单独的Nginx配置文件。那么，这个配置文件又放到哪里？

打开`/etc/nginx/nginx.conf`文件，我们可以看到里面有两行代码：

```
 include /etc/nginx/conf.d/*.conf;
 include /etc/nginx/sites-enabled/*;
```

这两行代码表示把`/etc/nginx/conf.d/`目录下所有以.conf结尾的文件，把`/etc/nginx/sites-enabled/`目录下所有的文件都包含到其中。即启动Nginx，加载`/etc/nginx/nginx.conf`文件的时候也会运行这些被包含的文件。这里我们把项目的Nginxi配置文件创建到`/etc/nginx/sites-enabled/`目录下，并且命名未covid-2019。

```
root@iZwz94kwqu5mk9oxpv2m2tZ:~# sudo touch /etc/nginx/sites-enabled/covid-2019
```

配置文件创建完了，那么让Nginx和Gunicorn关联的代码怎么写呢？







# 参考资料

[1] Nginx官网：https://www.nginx.com/